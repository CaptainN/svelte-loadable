<h1>This one will work</h1>
<Loadable loader={successLoader} delay="300">
  <div slot="loading">Loading and blessed to succeed...</div>
</Loadable>

<h1>This one will not</h1>
<Loadable ref:retry loader={getFailureLoader(5000)} timeout="3000" bind:error>
  <div slot="loading">Loading but doomed to failed...</div>
  <div slot="timeout">This is taking a while...</div>
  <div slot="error">
    {error}
    <br>
    <button on:click="refs.retry.load()">Try again</button>
  </div>
</Loadable>

<h1>This one will work with custom props</h1>
<Loadable loader={getDelayedLoader()} bind:component="successComponent">
  <div slot="loading">Loading and blessed to succeed...</div>
  <div slot="success">
    <svelte:component this={successComponent} customProp={true}/>
  </div>
</Loadable>

<h1>This one will timeout</h1>
<Loadable loader={getDelayedLoader(7000)} timeout="3000">
  <div slot="loading">Loading...</div>
  <div slot="timeout">
    This is taking a little bit too long...
  </div>
</Loadable>

<script>
  export default {
    components: {
      Loadable: '../../Loadable.html',
    },
    data() {
      return {
        getDelayedLoader: (delay = 3000) => () =>
          new Promise((resolve, reject) =>
            setTimeout(() => {
              resolve(import('./AsyncComponent.html'))
            }, delay),
          ),
        successLoader: () => import('./AsyncComponent.html'),
        getFailureLoader: (delay = 3000) => () =>
          new Promise((resolve, reject) =>
            setTimeout(() => reject(new Error('Some error')), delay),
          ),
      }
    },
  }
</script>